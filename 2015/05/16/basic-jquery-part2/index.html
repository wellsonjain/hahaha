<!DOCTYPE html>
<html>
<head>
<title>規矩與秩序: Basic jQuery (2)</title>
<meta content=' The world is moving so fast that the man who says it can&amp;rsquo;t be done is generally interrupted by someone doing it. - Elbert Hubbard Acting ...' name='description'>
<meta charset='utf-8'>
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<meta content='IE=edge' http-equiv='X-UA-Compatible'>
<meta content='True' name='HandheldFriendly'>
<meta content='規矩與秩序' property='og:site_name'>
<meta content='article' property='og:type'>
<meta content='Basic jQuery (2)' property='og:title'>
<meta content=' The world is moving so fast that the man who says it can&amp;rsquo;t be done is generally interrupted by someone doing it. - Elbert Hubbard Acting ...' property='og:description'>
<meta content='http://wellsonjain.github.io/2015/05/16/basic-jquery-part2/' property='og:url'>
<meta content='2015-05-16' property='article:published_time'>
<meta content='summary' name='twitter:card'>
<meta content='http://www.twitter.com/wellsonjain' name='twitter:site'>
<meta content='Basic jQuery (2)' name='twitter:title'>
<meta content=' The world is moving so fast that the man who says it can&amp;rsquo;t be done is generally interrupted by someone doing it. - Elbert Hubbard Acting ...' name='twitter:description'>
<meta content='http://wellsonjain.github.io/2015/05/16/basic-jquery-part2/' name='twitter:url'>
<link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
<link href="/images/WJ-logo.png" rel="icon" type="image/png" />
<link href="/stylesheets/application.css" rel="stylesheet" />
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(["_setAccount", "UA-62313382-1"]);
  _gaq.push(["_setDomainName", "wellsonjain.github.io"]);
  _gaq.push(["_trackPageview"]);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,300italic|Open+Sans:700,400|Source+Code+Pro:500,700' rel='stylesheet' type='text/css'>
<script src='https://carnivalapp.io/sites/444/init.js'></script>
</head>
<body class='post-template nav-closed'>
<div class='nav'>
<h3 class='nav-title'>Menu</h3>
<a class='nav-close' href='#'>
<span class='hidden'>Close</span>
</a>
<ul>
<li class='nav-home' role='presentation'>
<a href='/'>Home</a>
</li>
<li class='nav-about' role='presentation'>
<a href='/author/wellsonjain/'>About</a>
</li>
<li class='nav-ruby' role='presentation'>
<a href='/tag/ruby/'>Ruby</a>
</li>
<li class='nav-rails' role='presentation'>
<a href='/tag/rails/'>Rails</a>
</li>
<li class='nav-javascript' role='presentation'>
<a href='/tag/javascript/'>Javascript</a>
</li>
<li class='nav-thought' role='presentation'>
<a href='/tag/thought'>Thought</a>
</li>
</ul>
<a class='subscribe-button icon-feed' href='/feed.xml'>Subscribe</a>
</div>
<span class='nav-cover'></span>

<div class='site-wrapper'>
<header class='main-header no-cover post-head'>
<nav class='main-nav clearfix'>
<a class='menu-button icon-menu' href='#'>
<span class='word'>Menu</span>
</a>
</nav>
</header>
<main class='content' role='main'>
<article class='post'>
<header class='post-header'>
<h1 class='post-title'>Basic jQuery (2)</h1>
<section class='post-meta'>
<time class='post-date' datetime='2015-05-16'>
16 May 2015
</time>
on <a href='/tag/javascript/'>javascript</a>
</section>
</header>
<section class='post-content'><blockquote>
<p>The world is moving so fast that the man who says it can&rsquo;t be done is generally interrupted by someone doing it. - Elbert Hubbard</p>
</blockquote>

<h4>Acting on Interaction</h4>

<p>在上一篇我們有提到 jQuery 有一個行為叫做 <code>listen</code>，這就是聽有沒有什麼事件發生了呢? <code>on</code>就是其中一種，</p>
<pre class="highlight javascript"><code><span class="c1">// jQuery Object Methods</span>
<span class="nx">$</span><span class="p">(</span><span class="s1">'button'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){})</span>
</code></pre>

<p>上面這段的意思是，當我們<del>臨幸</del>選擇的 <code>button</code> 這個物件，只要發生了 <code>click</code> 這個事件，就會執行後面定義的 function</p>
<pre class="highlight javascript"><code><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'button'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">price</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'&lt;p&gt;From $399.99&lt;/p&gt;'</span><span class="p">);</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'.vacation'</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">price</span><span class="p">);</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">'button'</span><span class="p">).</span><span class="nx">remove</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<p>在上面我們看到，當 <code>button</code> 發生了 <code>click</code> 這個事件，就會在 <code>vacation</code> 的子層加上 <code>price</code> 這個 node，並且把 <code>button</code> 移除，但是這會發生一個問題，就是如果在同一個 DOM 裡面有多個 <code>button</code> 或是多個 <code>vacation</code> 那就會發生一次都改變的問題，所以在 jQuery 就提供了一個相當方便也相當重要的方法，叫做 <code>this</code>，<code>this</code> 所代表的意思為當前的物件，所以上面的程式，我們就可以將他換成下面這樣，</p>
<pre class="highlight javascript"><code><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'button'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">price</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'&lt;p&gt;From $399.99&lt;/p&gt;'</span><span class="p">);</span>
    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="s1">'.vacation'</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">price</span><span class="p">);</span>
    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">remove</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">});</span>

</code></pre>

<p>我們在程式中定義了 <code>button</code> 去 listen 事件，所以在這邊的 <code>this</code> 代表的物件就是 <code>button</code>，在邊使用 <code>closest</code> 顧名思義就是最近的 <code>vacation</code> class ，之所以不用先前提到的 <code>.parents()</code> 是因為我們可能無法確定會不會有很多相同的 class name，所以在這樣的情況之下使用 <code>closest</code> 會是更好的選擇。</p>

<p>在經過一連串的 refactor 之後，我們目前的程式碼看起來可讀性很高，但是唯一比較寫死的就是 <code>price</code> 這個物件，那我們有更好的方法可以去 improve 嗎? 當然，</p>
<pre class="highlight html"><code><span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"vacation onsale"</span> <span class="na">data-price=</span><span class="s">'399.99'</span><span class="nt">&gt;</span>
  <span class="nt">&lt;h3&gt;</span>Hawaiian Vacation<span class="nt">&lt;/h3&gt;</span>
  <span class="nt">&lt;button&gt;</span>Get Price<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">'comments'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;li&gt;</span>Amazing deal!<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span>Want to go!<span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/li&gt;</span>
</code></pre>

<p>首先我們先在 html 裡面加上一個 data attribute <code>data-price</code>，這樣我們就可以在我們的 jQuery 裡面去呼叫方法 <code>.data(&lt;name&gt;)</code>，</p>
<pre class="highlight javascript"><code><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'button'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">amount</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="s1">'.vacation'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">'price'</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">price</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'&lt;p&gt;From $'</span><span class="o">+</span><span class="nx">amount</span><span class="o">+</span><span class="s1">'&lt;/p&gt;'</span><span class="p">);</span>
    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="s1">'.vacation'</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">price</span><span class="p">);</span>
    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">remove</span><span class="p">();</span>
  <span class="p">});</span><span class="err">￼￼</span>
<span class="p">});</span>
</code></pre>

<p>這是個很方便的做法，於是我們便可以在 html 上面去設定多個自定義的 attribute，然後再使用上述的方法個取值。</p>

<p>接著我們繼續延伸說明 <code>on</code> 的用法，先看看上述的程式當中，我們設定為當 <code>button</code> 這個物件發生了 <code>click</code> 事件，但是可能整個 DOM 裡面會有多個 button 物件，所以我們可以藉由在傳入的 argument 去指定在這個物件底下的哪個物件要被執行 function。</p>
<pre class="highlight javascript"><code><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'.vacation'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="s1">'button'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">...</span>
  <span class="p">});</span><span class="err">￼￼</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>on() 的各種 Event: <a href="http://api.jquery.com/category/events/" rel="nofollow">http://api.jquery.com/category/events/</a></p>

<p>Mouse Events: <a href="http://api.jquery.com/category/events/mouse-events/" rel="nofollow">http://api.jquery.com/category/events/mouse-events/</a></p>

<p>Keyboard Events: <a href="http://api.jquery.com/category/events/keyboard-events/" rel="nofollow">http://api.jquery.com/category/events/keyboard-events/</a></p>

<p>Form Events: <a href="http://api.jquery.com/category/events/form-events/" rel="nofollow">http://api.jquery.com/category/events/form-events/</a></p>
</blockquote>

<h4>Link Layover</h4>

<p>接下來要講一個我覺得蠻有趣的東西，叫做 bubble up，也就是當事件發生之後該 node 會把這個事件發生的訊息告訴所有父層級，</p>
<pre class="highlight html"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
...
<span class="nt">&lt;ul&gt;</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"vacation"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">class=</span><span class="s">"expand"</span><span class="nt">&gt;</span>Show comment<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"comment"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;li&gt;</span>...<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
  <span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre>

<p>在上面這段 html 裡面當我們按下了 a link，因為 # 的原因，不管我們在哪個地方按下，都會回到最頂端，所以我們必須在我們的 callback function 再帶入一個 argument <code>event</code>，來為我們所觸發的 event 再做一些處理，在這邊我要介紹的是兩種處理的方式，一種叫做 <code>.stopPropagation()</code> 這個方法的意思就是當這個事件觸發的時候，只有這個物件會知道，父層級的 node 都會被擋下來，雖然如此因為 hashtag 我們還是會有置頂的狀況發生，所以有另外一種方法，叫做 <code>.preventDefault()</code>，這與我們第一個提到的方法有點不同，他會讓事件發生的訊息告訴所有父層級，但是卻不會進行處理。</p>

<h4>Animation</h4>

<p>最後要說的是上一篇提到的 animate 行為，也就是做出一點動態的效果來</p>
<pre class="highlight javascript"><code><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">'#vacations'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="s1">'.vacation'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s1">'highlighted'</span><span class="p">);</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">hasClass</span><span class="p">(</span><span class="s1">'highlighted'</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">animate</span><span class="p">({</span><span class="s1">'top'</span><span class="p">:</span> <span class="s1">'-10px'</span><span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">animate</span><span class="p">({</span><span class="s1">'top'</span><span class="p">:</span> <span class="s1">'0px'</span><span class="p">});</span>
    <span class="p">}</span><span class="err">￼</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<p>上面這邊所做的事情就是當我們按一下 click，就會給他加上 <code>highlighted</code> 的 class，那如果這個物件有這個 class 那就給他做出一點動態的效果，往上滑動 10px，但是畢竟這是 CSS 語法，我們希望能夠切割乾淨，所以最好的方法還是使用 CSS3 的函式，<code>transition: top 0.2s;</code> 這樣加上這個 class 也會有相同的效果。</p>

<p>(太棒了寫完基礎篇了!~~)</p>
</section>
<div id='disqus_thread'></div>
<script type='text/javascript'>
//<![CDATA[
                  var disqus_shortname = 'wellsonjain';
          
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
//]]>
</script>
<noscript>Please enable JavaScript to view the <a href='http://disqus.com/?ref_noscript'>comments powered by Disqus.</a></noscript>
<a href='http://disqus.com' class='dsq-brlink'>comments powered by <span class='logo-disqus'>Disqus</span></a>

<!-- # Google Analytics -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(["_setAccount", "UA-62313382-1"]);
  _gaq.push(["_setDomainName", "wellsonjain.github.io"]);
  _gaq.push(["_trackPageview"]);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<footer class='post-footer'>
<figure class='author-image'>
<a class='img' href='/author/wellsonjain/' style='background-image: url(https://www.gravatar.com/avatar/da18abbd93834d26efd7351b09912db5?size=68)'>
<span class='hidden'>wellsonjain's Picture</span>
</a>
</figure>
<section class='author'>
<h4>
<a href='/author/wellsonjain/'>wellsonjain</a>
</h4>
<p></p>
不以規距，不成方圓
<div class='author-meta'>
<span class='author-location icon-location'>Taipei, Taiwan</span>
</div>
</section>
<section class='share'>
<h4>Share this post</h4>
<a class='icon-twitter' href='https://twitter.com/intent/tweet?text=Basic jQuery (2)&amp;amp;url=http://wellsonjain.github.io/2015/05/16/basic-jquery-part2/' onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
<span class='hidden'>Twitter</span>
</a>
<a class='icon-facebook' href='https://www.facebook.com/sharer/sharer.php?u=http://wellsonjain.github.io/2015/05/16/basic-jquery-part2/' onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
<span class='hidden'>Facebook</span>
</a>
<a class='icon-google-plus' href='https://plus.google.com/share?url=http://wellsonjain.github.io/2015/05/16/basic-jquery-part2/' onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
<span class='hidden'>Google+</span>
</a>
</section>
</footer>
</article>
</main>
<aside class='read-next'>
<a class='no-cover read-next-story' href='/2015/05/14/basic-jquery/'>
<section class='post'>
<h2>Basic jQuery</h2>
<p>Fear does not prevent death. It prevents life. - Naguib Mahfouz 今天要記錄一些基礎的 jQuery 基本常識，基本到我本來還真的不會&hellip;首先先來看看 jQuery 到底可以做到哪些事呢？ find 找到 HTML&hellip;</p>
</section>
</a>
<a class='no-cover prev read-next-story' href='/2015/05/18/societal-collapse/'>
<section class='post'>
<h2>崩潰的社會</h2>
<p>Life is divided into the horrible and the miserable. - Woody Allen 小時候其實蠻喜歡看政論節目，尤其是口條很好的名嘴電爆某個不停跳針護航的名嘴，就會有種大快人心，正義又再次獲得勝利的感覺，但是就我有印象高中開始看政論節目以來，十年了，依然相同。 隨著年紀的增長，看的東西多了，也慢慢地學會該怎麼去思考，當然不是說自己就變得能看事情看得深入，或是看出別人看不見的東西，只是我總覺得我所身處的社會，漸漸地走向崩潰，為什麼這麼說呢？我認為這十年來一直沒有長進的媒體是很大的原因。 自從政論節目逐漸在各大電視台盤據黃金時段，每天寫好劇本輪番上陣，正反兩分以各種姿態不停攻防，而新聞媒體也逐漸地形成一種仇富或是以一種自以為正義之身的心態來批判誰誰誰又做出了很糟糕的行為，我想可能這個方向可能能得到比較高的點擊率或是廣告收入吧？但是這樣的型態，只會逐漸地養成兩種人，一種是選邊站的人，各自擁護，一種是冷漠的人，但是無論是哪一種的人，都具有相同的共識「除了跟我一樣的人，其他的我都不相信。」一個對彼此沒有信任的三方，該如何形成共識？ 一個沒有共識的社會，又該如何走向共同未來？這是其一 媒體，或者更精確地說，新聞媒體，在這個社會所應該扮演的角色，除了監督政府之外，更應該針對政策或是國際的走向進行更深入的探討，但是深入探討的不是這些，而是哪個明星又偷腥了，哪個明星又走光了，知道這些資訊的民眾，能對這個社會有多深入的想像呢？他們的世界已經充滿了這些東西，又怎麼能裝得下其他的東西呢？這是其二 隨著這些惡性的循環，我實在找不到到底這個社會能夠藉由什麼樣的力量能夠再度扭轉，然而，這樣的情況，卻又是獨裁政府所樂見的，因為我們被餵食的是他們想讓你們知道的事情，最好能夠沒有任何一點批派的能力，這樣能讓他們在鞏固自己的利益的時候能夠減少阻力，而隨著時間的推移，這樣的問題只會越來越難扭轉，這是其三 對於這個社會的走向我是悲觀的，一方面也是台灣人的民族性，因為我們大多崇洋，甚至更精確地說是崇美，而美國是英雄主義，對他們而言一切的成功來自於一個英雄，所以每個人都想成為英雄，而其他人只是他腳底下的臣子，但是這時候我必須搬出野原廣志的名言&hellip;</p>
</section>
</a>
</aside>

<footer class='site-footer clearfix'>
<section class='copyright'>
<a href='/'>規矩與秩序</a>
&copy;
2016
</section>
<section class='poweredby'>
Casper theme powered by
<a href='https://ghost.org'>Ghost</a>
</section>
</footer>
</div>
<script src="/javascripts/application.js"></script>
</body>
</html>
<script>
  document.addEventListener("DOMContentLoaded", function(){
    Carnival.init({
      block_selector: ':scope > p, :scope li, :scope > .highlight, :scope > blockquote'
    });
  });
</script>
